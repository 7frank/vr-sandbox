<!-- note: for now, the preloaded get attached manually via js to be able to reload the full scene which is changes in the near future (jan/18) -->

<script type="not-js" id="funky" data-diffuse>

    void $main(inout vec4 c, vec4 o, vec2 uv, float d){
        c.rgb = sin(c.gbr + time) * o.bgr;
    }

</script>
<!-- TODO ... effects="film" film="sIntensity:0.4" FIXME not working can't reliably remove effects again -->

<a-scene
         pointer
         renderer-listener  networked-listeners light="shadowMapType: basic"
         visible="true"
         id="aframe-project"
         cursor-focus
         physics="debug: false"
        > <!-- TODO evaluate local region based physics -->



    <!-- Default lighting also injected by A-Frame. -->
    <a-entity light="type: ambient; color: #BBB"></a-entity>
    <a-entity light="type: directional; color: #cc9; intensity: 0.4" position="-1 .1 0"></a-entity>

    <a-assets>
        {{> asssetsDefinition}}
        <!-- /Templates -->

    </a-assets>


    {{> staticContent}}
    {{> player1}}




    <!-- TODO keep distance relative to player -->
   <!-- <a-entity scale="2 2 2" dummy-raycaster
              environment="preset: contact; ground:none;dressing:none;dressingAmount:0"></a-entity>
-->
    {{> scene/sky/default-sky}}
    {{> scene/defaultSounds}}


    <a-entity  id="regions-container" >
        {{> scene/constructRegions}}
    </a-entity>





    <a-plane game-object-limbo shadow="cast: false; receive: false"
             src="/assets/images/grids/grass.jpg"
             material="repeat: 20 20"
             position="0 -100 0" rotation="-90 0 0"
             width="10000" height="10000" color="#7BC8A4" static-body></a-plane>


</a-scene>



