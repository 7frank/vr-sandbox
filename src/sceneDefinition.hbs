<!-- note: for now, the preloaded get attached manually via js to be able to reload the full scene which is changes in the near future (jan/18) -->

<script type="not-js" id="funky" data-diffuse>

    void $main(inout vec4 c, vec4 o, vec2 uv, float d){
        c.rgb = sin(c.gbr + time) * o.bgr;
    }

</script>

<!--  effects="film" film="sIntensity:0.4" FIXME not working can't reliably remove effects again -->

<a-scene
         pointer
         renderer-listener networked-scene="room: basic;debug: true;" light="shadowMapType: basic"
         visible="true"
         id="aframe-project"
         cursor-focus
         physics="debug: false"> <!-- TODO evaluate local region based physics -->
    <!-- Default lighting also injected by A-Frame. -->
    <a-entity light="type: ambient; color: #BBB"></a-entity>
    <a-entity light="type: directional; color: #cc9; intensity: 0.4" position="-1 .1 0"></a-entity>

    <a-assets>
        {{> asssetsDefinition}}
        <!-- /Templates -->
    </a-assets>


    {{> staticContent}}
    {{> player1}}




    <!-- TODO keep distance relative to player -->
   <!-- <a-entity scale="2 2 2" dummy-raycaster
              environment="preset: contact; ground:none;dressing:none;dressingAmount:0"></a-entity>
-->

    <a-assets>
        <img id="sky-large" src="assets/images/skybox/sky-large.jpg">
      <!--  <img id="sky-medium" src="assets/images/skybox/sky-medium.jpg"> -->
    </a-assets>
    <a-sky src="#sky-large"></a-sky>



    <a-sound src="src: url(assets/audio/22 Monkey Fight Menu.mp3)" autoplay="true" loop="true" volume=0.7
             position="0 5 50"></a-sound>
    <a-sound class="sound-cheer" src="src: url(assets/audio/Large_Stadium-stephan_schutze-2122836113.mp3)"
             autoplay="false" volume=0.4></a-sound>
    <a-sound class="sound-ball-bounce" src="src: url(assets/audio/rubber_ball_bounce_dirt_01.mp3)" autoplay="false"
             volume=0.4></a-sound>

    <a-sound class="command-error" src="src: url(assets/audio/hl2-button3.wav)" autoplay="false"
             volume=0.4></a-sound>


    <a-box position="-100 0 -100" editable-region="src:assets/demo/region/lod-terrain.html"></a-box>
    <a-box position="-100 0 000" editable-region="src:assets/demo/region/contest-camp.html"></a-box>
    <a-box position="-100 0 100" editable-region="src:assets/demo/region/primitives.html"></a-box>

    <a-box position="0 0 -100"
           editable-region="src:assets/demo/region/animation-and-ai-testbed.html;loadDistance:50;unloadDistance:100"></a-box>

    <a-box position="0 0 0" id="🏠center-region" name="center-region"
           editable-region="src:assets/demo/region/editor-demo.html"></a-box>


    <a-box position="0 0 100" editable-region="src:assets/demo/region/rocket-league.html"></a-box>

    <a-box position="100 0 -100" editable-region="src:assets/demo/region/sample-heightmap.html;defaultMaterial:false" material="visible:false"></a-box>
    <a-box position="100 0 0" id="Environment Physics"
           editable-region="src:assets/demo/region/contest-medieval2.html"></a-box>
    <a-box position="100 0 100" id="wood" editable-region="src:assets/demo/region/proc-wood.html"></a-box>

    <a-box position="-200 0 -100" editable-region="src:assets/demo/region/contest-medieval3.html"></a-box>
    <a-box position="-200 0 0" editable-region="src:assets/demo/region/contest-medieval4.html"></a-box>
    <a-box position="-200 0 100" editable-region="src:assets/demo/region/contest-medieval5.html"></a-box>

    <a-box position="-300 0 -100" id="media-player" editable-region="src:assets/demo/region/video-tutorial-section.html"></a-box>
    <a-box position="-300 0 0"   id="sample-menus" editable-region="src:assets/demo/region/menu-section.html"></a-box>
    <a-box position="-300 0 100"    editable-region="src:assets/demo/region/404.html"></a-box>

    <a-box position="-400 0 -100" id="Car Physics" editable-region="src:assets/demo/region/physics.html"></a-box>
    <a-box position="-400 0 0" id="Configurator" editable-region="src:assets/demo/region/product-config.html;defaultMaterial:false" material="visible:false"></a-box>




    <a-plane game-object-limbo shadow="cast: false; receive: false"
             src="/assets/images/grids/grass.jpg"
             material="repeat: 20 20"
             position="0 -100 0" rotation="-90 0 0"
             width="10000" height="10000" color="#7BC8A4" static-body></a-plane>


    <!-- test for first of 3 stereo html approaches -->
    <!-- <a-html-3d  position="0 2 3" stereo="eye:left"> <span>hello 3d</span>    </a-html-3d>
 -->

    <!-- TODO stereo="eye:right" FIXME dialog1 not present when entity is created so no html2canvas happening -->
    <!--    <a-entity  geometry="primitive:plane;width:5;height:5;" rotation="0 0 0" position="0 2 4" material="shader:html;target:#testFormShader;transparent:false;ratio:width;fps:10.5;debug:#debugShader"></a-entity>
    -->

    <!-- emoji 66 letters -->

    <!--
        <a-entity id="emojiEntity" geometry="primitive:box;width:3;height:3;depth:3;" rotation="0 0 0"
                  position="-2 3.5 -0.5"
                  material="shader:html;target:#emoji;transparent:false;ratio:height;fps:0.3;side:double;"></a-entity>

        <a-entity id="lettersEntity" geometry="primitive:plane;width:5;height:5;" rotation="-90 0 0" position="-0.2 0.5 4.5"
                  material="shader:html;target:#target;transparent:false;fps:1.5;debug:#debug"></a-entity>
    -->


    <!--    <a-entity camera universal-controls="fly:true" position="0 5 0" jump-ability kinematic-body></a-entity> -->
</a-scene>



